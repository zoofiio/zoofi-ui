(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4317],{38179:function(e,s,t){Promise.resolve().then(t.bind(t,87061))},87061:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Vaults}});var a=t(57437),l=t(80619),n=t(72009),i=t(14389),d=t(87456),r=t(65571),c=t(99869),o=t(80513),x=t(99451),m=t(20951),u=t(24033),b=t(99150),v=t(84302),p=t(80547),f=t(64020),h=t(82265),g=t(8580),j=t(54415),k=t(81628),N=t(36479),T=t(20373),A=t(2265),S=t(41697),w=t(99888),y=t(35769),W=t(79352),M=t(34522);function SimpleTabs(e){let{className:s,listClassName:t,triggerClassName:l,contentClassName:n,data:i,onTabChange:d}=e,[r,c]=(0,A.useState)(i[0].tab);return(0,a.jsxs)(M.fC,{value:r,className:(0,k.cn)("w-full",s),onValueChange:e=>{c(e),null==d||d(e)},children:[(0,a.jsx)(M.aV,{className:(0,k.cn)("bg-slate-100 p-1 w-fit rounded-md dark:bg-transparent",t),children:i.map(e=>(0,a.jsx)(M.xz,{className:(0,k.cn)('rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900 dark:bg-transparent dark:text-slate-50/60 dark:data-[state="active"]:text-slate-50',l),value:e.tab,children:e.tab},e.tab))}),i.map(e=>(0,a.jsx)(M.VY,{value:e.tab,className:(0,k.cn)("flex flex-col gap-6 outline-none",n),children:e.content},e.tab))]})}function VaultCard(e){let{vc:s}=e,{balances:t,prices:l,vaultsMode:d}=(0,A.useContext)(N.g),r=(0,i.p)(),c=n.O6[r],o=d[s.vault],[x,m]=(0,A.useState)("Mint"),[u,b]=(0,A.useMemo)(()=>{let e="Mint"==x;return 3==o?["Adjustment Model--High AAR",e?"Minting ".concat(n.TW," alone is feasible"):"Redeeming ".concat(s.xTokenSymbol," alone is feasible")]:2==o?["Adjustment Model--Low AAR",e?"Minting ".concat(s.xTokenSymbol," alone is feasible"):"Redeeming ".concat(n.TW," alone is feasible")]:["Stability Model",e?"".concat(n.TW," and ").concat(s.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(n.TW," and ").concat(s.xTokenSymbol)]},[o,s,x]),[M,R]=(0,A.useState)(""),[C,P]=(0,A.useState)(""),B=(0,k.ok)(l,s.assetTokenAddress),D=(0,k.ok)(l,s.xTokenAddress),q=t[s.assetTokenAddress],_=t[n.O1[r]],F=t[s.xTokenAddress],[{usbAmount:U,xAmount:V,redeemActive:E,redeemFocus:Z},z]=(0,w.Z)({usbAmount:"",xAmount:"",redeemActive:"",redeemFocus:n.TW}),O=(0,A.useMemo)(()=>({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcMintPairs",args:[s.vault,(0,k.su)(M||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcMintUsbAboveAARU",args:[s.vault,(0,k.su)(M||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcMintMarginTokensBelowAARS",args:[s.vault,(0,k.su)(M||"0")]}],watch:!0,enabled:"Mint"==x}),[s,M,x]),{data:[L,H,I]=[void 0,void 0,void 0]}=(0,j.uX)(O),K=(0,k.ok)(L,["result",1]),Y=(0,k.ok)(L,["result",2]),X=(0,k.ok)(H,["result",1]),G=(0,k.ok)(I,["result",1]),{data:[J,Q]=[void 0,void 0]}=(0,j.uX)({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcPairdMarginTokenAmount",args:[s.vault,(0,k.su)(U||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcPairedUsbAmount",args:[s.vault,(0,k.su)(V||"0")]}],query:{enabled:"Redeem"==x}}),{data:[$,ee]=[void 0,void 0]}=(0,j.uX)({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcRedeemByMarginTokenAboveAARU",args:[s.vault,(0,k.su)(V||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcRedeemByUsbBelowAARS",args:[s.vault,(0,k.su)(U||"0")]}],query:{enabled:"Redeem"==x}}),es=(0,k.ok)(J,["result"]),et=(0,k.ok)(Q,["result"]),ea=(0,k.ok)($,["result",1]),el=(0,k.ok)(ee,["result",1]),en=E==s.xTokenSymbol,ei=E==n.TW,ed=(0,A.useMemo)(()=>{let e={abi:h.WW,address:s.vault,args:[(0,k.su)(M)],value:s.assetTokenAddress==n.K8?(0,k.su)(M):0n,functionName:"mintPairs"};return C==n.TW&&(e.functionName="mintUsbAboveAARU"),C==s.xTokenSymbol&&(e.functionName="mintMarginTokensBelowAARS"),e},[o,C,M,s]),er=C==s.xTokenSymbol?0n:C===n.TW?X:K,ec=C==n.TW?0n:C===s.xTokenSymbol?G:Y,eo=en?"0":Z==n.TW?U:(0,W.d)(et),ex=ei?"0":Z==s.xTokenSymbol?V:(0,W.d)(es),em=(0,A.useMemo)(()=>({vc:s,watch:!0,abi:h.Wn,address:c,functionName:"calcPairedRedeemAssetAmount",args:[s.vault,(0,k.su)(ex||"0")]}),[s,ex]),{data:eu}=(0,j.D2)(em),eb=en?ea:ei?el:(0,k.ok)(eu,[1]),ev=(0,A.useMemo)(()=>{let e={abi:h.WW,address:s.vault,functionName:E==n.TW?"redeemByPairsWithExpectedUsbAmount":"redeemByPairsWithExpectedMarginTokenAmount",args:E==n.TW?[(0,k.su)(eo)]:[(0,k.su)(ex)]};return E==s.xTokenSymbol&&(e.functionName="redeemByMarginTokenAboveAARU",e.args=[(0,k.su)(ex)]),E==n.TW&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,k.su)(eo)]),e},[o,E,eo,ex,s]);return(0,a.jsxs)("div",{className:(0,y.m)("card relative h-[460px]",o>1?"!bg-violet-500/10":""),children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Advanced Panel"}),(0,a.jsx)("div",{className:"absolute top-[50px] right-6 flex flex-col items-end z-10",children:(0,a.jsxs)("div",{className:(0,y.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,y.m)("w-3 h-3 rounded-full","Stability Model"==u?"bg-green-500":"bg-red-500")}),(0,a.jsx)(f.C,{node:(0,a.jsx)("div",{className:(0,y.m)("Stability Model"==u?"text-green-500":"text-red-500"),children:u}),children:b})]})}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsx)(SimpleTabs,{onTabChange:m,data:[{tab:"Mint",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(p.W,{asset:s.assetTokenSymbol,exchange:(0,T.dq)(B*(0,k.su)(M)/g.Pq),balance:q,amount:M,setAmount:R}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(S.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)(p.W,{amount:(0,T.ZM)(er),onClick:()=>{P(3==o?n.TW:"")},asset:n.TW,exchange:(0,T.dq)(er),readonly:!0,disable:o<=1,selected:C===n.TW}),(0,a.jsx)(p.W,{amount:(0,T.ZM)(ec),onClick:()=>{P(2==o?s.xTokenSymbol:"")},asset:s.xTokenSymbol,exchange:(0,T.dq)(D*ec/g.Pq),readonly:!0,disable:o<=1,selected:C===s.xTokenSymbol})]}),(0,a.jsx)(v.v,{tx:"Mint",disabled:s.disableIn||0n==(0,k.su)(M)||(0,k.su)(M)>q,onTxSuccess:()=>{R("")},config:ed,approves:{[s.assetTokenAddress]:(0,k.su)(M)},spender:s.vault})]})},{tab:"Redeem",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(p.W,{amount:eo,setAmount:e=>z({usbAmount:e}),balance:_,onClick:()=>{z({redeemActive:2==o?n.TW:"",redeemFocus:n.TW})},asset:n.TW,exchange:(0,T.dq)((0,k.su)(eo)),readonly:E==s.xTokenSymbol,selected:E===n.TW}),(0,a.jsx)(p.W,{amount:ex,setAmount:e=>z({xAmount:e}),asset:s.xTokenSymbol,onClick:()=>{z({redeemActive:3==o?s.xTokenSymbol:"",redeemFocus:s.xTokenSymbol})},exchange:(0,T.dq)((0,k.su)(ex)*D/g.Pq),balance:F,readonly:E==n.TW,selected:E===s.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(S.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end whitespace-nowrap",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(p.W,{asset:s.assetTokenSymbol,amount:(0,W.d)(eb),exchange:(0,T.dq)(B*eb/g.Pq),readonly:!0}),(0,a.jsx)(v.v,{tx:"Redeem",config:ev,disabled:ei&&0n==(0,k.su)(eo)||en&&0n==(0,k.su)(ex)||!ei&&!en&&(0n==(0,k.su)(eo)||0n==(0,k.su)(ex))||(0,k.su)(eo)>_||(0,k.su)(ex)>F,onTxSuccess:()=>{z({usbAmount:"",xAmount:""})},spender:s.vault})]})}]})})]})}var R=t(91056),C=t(66949),P=t(13756),B=t(58910),D=t(79037),q=t(93195),_=t(51549),F=t(70482),U=t(21817),V=t(86825),E=t(78203),Z=t(85686),z=t(97062),O=t(28278),L=t(79499);let H={ZUSD:"linear-gradient(90deg, rgba(16, 185, 129, 0.25) 0%, rgba(99, 102, 241, 0.25) 100%)",ZUSD_dark:"linear-gradient(90deg, #C2B7FD 0%, #6366F1 100%)",xiBGT:"rgba(238, 234, 254, 1)",xiBGT_dark:"linear-gradient(90deg, #C2B7FD 0%, #746D97 100%)",HONEY:"rgba(226, 254, 182, 1)",xHONEY_dark:"#E2FEB6"},I={ZUSD:"rgba(255, 255, 255, 1)",xiBGT:"rgba(219, 210, 255, 1)",xHONEY:"rgba(196, 241, 126, 1)"};function PointCard(e){let{symbol:s,tit:t,sub:l,total:n,link:i}=e,d=(0,L.l)(e=>e.theme);return(0,a.jsxs)("div",{style:{boxShadow:"0px 0px 12px 0px rgba(187, 215, 144, 0.4)"},className:"rounded-2xl overflow-hidden bg-white text-base flex flex-col dark:bg-slate-950",children:[(0,a.jsxs)("div",{className:"flex md:flex-wrap items-center p-4 gap-2 dark:text-black",style:{background:H["".concat(s,"_").concat(d)]||H[s]},children:[(0,a.jsx)(_.c,{symbol:s,size:42,className:"shrink-0"}),(0,a.jsx)("div",{className:"font-semibold",children:s}),(0,a.jsxs)("div",{className:"whitespace-nowrap text-center text-sm ml-auto flex flex-col items-center flex-1",children:[(0,a.jsx)("div",{className:"rounded-full px-2 py-[2px] w-fit",style:{background:I[s]},children:t}),(0,a.jsx)("div",{className:"mt-1",children:l})]})]}),(0,a.jsxs)("div",{className:"flex justify-between p-4 whitespace-nowrap text-sm items-center gap-2",children:[(0,a.jsx)("div",{className:"font-medium text-slate-500 dark:text-slate-50/60 self-start text-xs items-center gap-1",children:(0,a.jsx)("span",{className:"font-semibold text-sm",children:n})}),i&&(0,a.jsxs)("a",{className:"underline text-slate-500 dark:text-slate-50 flex items-center gap-1",href:i.url,target:"_blank",children:[i.text," ",(0,a.jsx)(Z.Ig3,{})]})]})]})}function PointCards(e){let{vc:s}=e,t=function(e){let s=(0,i.p)(),{prices:t,usbApr:a,vaultsState:l,stableVaultsState:d}=(0,A.useContext)(N.g),r=(0,C.a)(),c=(0,V.i)(),o=(0,E.m)(),x=(0,A.useMemo)(()=>{let a=[],i=e.isStable?d[e.vault].M_USB_USDC:l[e.vault].M_USB_ETH;t[n.K8],t[n.O1[s]],a.push({symbol:n.TW,tit:"APY:".concat((0,k.Jh)(o[n.O1[s]],10)," ~ ").concat((0,k.Jh)(o.USB_END,10)),sub:"~ Interest + Earning",total:"Total Minted: ".concat((0,T.dq)(i,0))});let c=e.isStable&&(0,R.RG)()?"~ ".concat(r[e.vault].toFixed(2),"x Berachain Native Yield"):"~ ".concat(r[e.vault].toFixed(2),"x Leveraged long on ").concat(e.assetTokenSymbol);return a.push({symbol:e.xTokenSymbol,tit:"Leverage the Bull",sub:c,total:"Total Minted: ".concat((0,T.dq)(i,0))}),a},[s,t,r,a,c]);return x}(s),[l,d]=(0,U.n)(e=>{let{width:s}=e;return s<970});return 0==t.length?null:(0,a.jsxs)("div",{ref:l,className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:pb-[60px]",children:[!d&&t.map(e=>(0,a.jsx)(PointCard,{...e},e.symbol)),d&&(0,a.jsx)(O.tq,{spaceBetween:20,pagination:{clickable:!0,renderBullet:function(e,s){return'<div class="'+s+'"></div>'}},className:"-translate-x-[1rem] !px-4 !pb-10 !w-screen",modules:[z.tl],children:t.map(e=>(0,a.jsx)(O.o5,{children:(0,a.jsx)(PointCard,{...e})},e.symbol))})]})}var K=t(8623);function StableVaultCard(e){let{vc:s}=e,{balances:t,prices:l,stableVaultsState:d}=(0,A.useContext)(N.g),r=(0,i.p)(),c=n.O6[r],[o,x]=(0,A.useState)("Mint"),[m,u]=(0,A.useState)(""),[b,M]=(0,A.useState)(""),R=d[s.vault],C=R.aar>0&&R.aar<R.AARS,P=l[s.assetTokenAddress],B=l[s.xTokenAddress],D=t[s.assetTokenAddress],q=t[n.O1[r]],_=t[s.xTokenAddress],[{usbAmount:F,xAmount:U,redeemActive:V,redeemFocus:E},Z]=(0,w.Z)({usbAmount:"",xAmount:"",redeemActive:"",redeemFocus:n.TW}),z=(0,A.useMemo)(()=>({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcMintPairsFromStableVault",args:[s.vault,(0,k.su)(m||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcMintUsbFromStableVault",args:[s.vault,(0,k.su)(m||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcMintMarginTokensFromStableVault",args:[s.vault,(0,k.su)(m||"0")]}],watch:!0,enabled:"Mint"==o}),[s,m,o]),{data:[O,L,H]=[void 0,void 0,void 0]}=(0,j.uX)(z),I=(0,k.ok)(O,["result",1]),K=(0,k.ok)(O,["result",2]),Y=(0,k.ok)(L,["result",1]),X=(0,k.ok)(H,["result",1]),{data:[G,J]=[void 0,void 0]}=(0,j.uX)({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcPairdMarginTokenAmountForStableVault",args:[s.vault,(0,k.su)(F||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcPairedUsbAmountForStableVault",args:[s.vault,(0,k.su)(U||"0")]}],query:{enabled:"Redeem"==o}}),{data:[Q,$]=[void 0,void 0]}=(0,j.uX)({contracts:[{vc:s,abi:h.Wn,address:c,functionName:"calcRedeemByMarginTokensFromStableVault",args:[s.vault,n.e_[r],(0,k.su)(U||"0")]},{vc:s,abi:h.Wn,address:c,functionName:"calcRedeemByUsbFromStableVault",args:[s.vault,n.e_[r],(0,k.su)(F||"0")]}],query:{enabled:"Redeem"==o}}),ee=(0,k.ok)(G,["result"]),es=(0,k.ok)(J,["result"]),et=(0,k.ok)(Q,["result",1]),ea=(0,k.ok)($,["result",1]),el=V==s.xTokenSymbol,en=V==n.TW,ei=(0,A.useMemo)(()=>{let e={abi:h.S4,address:s.vault,functionName:"mintPairs",args:[(0,k.su)(m)],value:s.assetTokenAddress==n.K8?(0,k.su)(m):0n};return b==n.TW&&(e.functionName="mintUsb"),b==s.xTokenSymbol&&(e.functionName="mintMarginTokens"),e},[b,m,s]),ed=b==s.xTokenSymbol?0n:b===n.TW?Y:I,er=b==n.TW?0n:b===s.xTokenSymbol?X:K,ec=el?"0":E==n.TW?F:(0,W.d)(es),eo=en?"0":E==s.xTokenSymbol?U:(0,W.d)(ee),ex=(0,A.useMemo)(()=>({vc:s,watch:!0,abi:h.Wn,address:c,functionName:"calcRedeemByPairsAssetAmountForStableVault",args:[s.vault,n.e_[r],(0,k.su)(eo||"0")]}),[s,eo]),{data:em}=(0,j.D2)(ex),eu=el?et:en?ea:(0,k.ok)(em,[1]),eb=(0,A.useMemo)(()=>{let e={abi:h.S4,address:s.vault,functionName:V==n.TW?"redeemByPairsWithExpectedUsbAmount":"redeemByPairsWithExpectedMarginTokenAmount",args:V==n.TW?[(0,k.su)(ec)]:[(0,k.su)(eo)]};return V==s.xTokenSymbol&&(e.functionName="redeemByMarginTokens",e.args=[(0,k.su)(eo)]),V==n.TW&&(e.functionName="redeemByUsb",e.args=[(0,k.su)(ec)]),e},[V,ec,eo,s]);return(0,a.jsxs)("div",{className:(0,y.m)("card relative h-[460px]"),children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Advanced Panel"}),(0,a.jsx)("div",{className:"absolute top-[50px] right-6 flex flex-col items-end z-10",children:(0,a.jsx)(f.C,{node:(0,a.jsxs)("div",{className:(0,y.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,y.m)("w-3 h-3 rounded-full",C?"bg-red-500":"bg-green-500")}),(0,a.jsx)("div",{className:(0,y.m)(C?"text-red-500":"text-green-500"),children:C?"Adjustment Model":"Stability Model"})]}),children:C?"Mint"==o?"Minting ".concat(n.TW," alone is not feasible"):"Redeeming USDBx alone is not feasible":""})}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsx)(SimpleTabs,{onTabChange:x,data:[{tab:"Mint",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(p.W,{asset:s.assetTokenSymbol,exchange:(0,T.dq)(P*(0,k.su)(m)/g.Pq),balance:D,amount:m,setAmount:u}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(S.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)(p.W,{amount:(0,T.ZM)(ed),onClick:()=>{M(C?"":b==n.TW?"":n.TW)},asset:n.TW,exchange:(0,T.dq)(ed),readonly:!0,selected:b===n.TW}),(0,a.jsx)(p.W,{amount:(0,T.ZM)(er),onClick:()=>{M(b==s.xTokenSymbol?"":s.xTokenSymbol)},asset:s.xTokenSymbol,exchange:(0,T.dq)(B*er/g.Pq),readonly:!0,selected:b===s.xTokenSymbol})]}),(0,a.jsx)(v.v,{tx:"Mint",disabled:s.disableIn||0n==(0,k.su)(m)||(0,k.su)(m)>D,onTxSuccess:()=>{u("")},config:ei,approves:{[s.assetTokenAddress]:(0,k.su)(m)},spender:s.vault})]})},{tab:"Redeem",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(p.W,{amount:ec,setAmount:e=>Z({usbAmount:e}),balance:q,onClick:()=>{Z({redeemActive:V==n.TW?"":n.TW,redeemFocus:n.TW})},asset:n.TW,exchange:(0,T.dq)((0,k.su)(ec)),readonly:V==s.xTokenSymbol,selected:V===n.TW}),(0,a.jsx)(p.W,{amount:eo,setAmount:e=>Z({xAmount:e}),asset:s.xTokenSymbol,onClick:()=>{Z({redeemActive:C?"":V==s.xTokenSymbol?"":s.xTokenSymbol,redeemFocus:s.xTokenSymbol})},exchange:(0,T.dq)((0,k.su)(eo)*B/g.Pq),balance:_,readonly:V==n.TW,selected:V===s.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(S.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end whitespace-nowrap",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(p.W,{asset:s.assetTokenSymbol,amount:(0,W.d)(eu),exchange:(0,T.dq)(P*eu/g.Pq),readonly:!0}),(0,a.jsx)(v.v,{tx:"Redeem",config:eb,disabled:en&&0n==(0,k.su)(ec)||el&&0n==(0,k.su)(eo)||!en&&!el&&(0n==(0,k.su)(ec)||0n==(0,k.su)(eo))||(0,k.su)(ec)>q||(0,k.su)(eo)>_,onTxSuccess:()=>{Z({usbAmount:"",xAmount:""})},spender:s.vault})]})}]})})]})}let Y=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})}),X=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#FF3D3D",strokeWidth:"4"})}),G=(0,a.jsx)("div",{className:"mr-[10px]",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",children:(0,a.jsx)("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"#64748B"})})});function VaultSimple(e){let{vc:s}=e,{balances:t,prices:l,vaultsMode:d,stableVaultsState:r}=(0,A.useContext)(N.g),c=(0,k.ok)(l,s.assetTokenAddress),o=d[s.vault],x=s.assetTokenSymbol,[m,u]=(0,A.useState)(""),b=(0,k.su)(m),S=s.xTokenSymbol,w=t[s.assetTokenAddress],y=r[s.vault],[W,M]=(0,A.useState)(""),R=(0,i.p)(),{data:C}=(0,j.D2)({abi:h.Wn,address:n.O6[R],functionName:s.isStable?"calcMintPairsFromStableVault":"calcMintPairs",args:[s.vault,(0,k.su)("1")]}),{data:P}=(0,j.D2)({abi:h.Wn,address:n.O6[R],functionName:"calcMintMarginTokensFromStableVault",args:[s.vault,(0,k.su)("1")],query:{enabled:s.isStable}}),D=s.isStable&&0n==y.M_USDCx?0n:(0,k.ok)(C,[1]),q=s.isStable&&0n==y.M_USDCx?(0,k.ok)(P,[1]):(0,k.ok)(C,[2]),F=t[n.O1[R]],U=t[s.xTokenAddress],V=(0,k.NA)([q>0n?U*g.Pq/q:0n,D>0n?F*g.Pq/D:0n]),E=(0,k.su)(W),Z=(0,A.useMemo)(()=>{let e={abi:s.isStable?h.S4:h.WW,address:s.vault,functionName:"redeemByPairsWithExpectedMarginTokenAmount",args:[E*q/g.Pq]};return e},[o,E,q,s]);return(0,a.jsx)("div",{className:"w-full relative flex items-center justify-between",children:(0,a.jsxs)("div",{className:"bg-white relative border border-1 border-[#E4E4E7] p-[20px] pt-0 rounded-[16px] w-full dark:bg-transparent dark:border dark:border-zinc-600",children:[(0,a.jsx)(K.o,{trigger:(0,a.jsxs)("div",{className:"absolute w-fit h-[21px] right-[20px] top-[30px] flex items-center gap-1 cursor-pointer",children:[(0,a.jsx)(B.b9P,{className:"text-indigo-500 text-xl"}),(0,a.jsx)(f.C,{inFlex:!0,className:" text-slate-500",children:s.isStable?"The advanced panel allows for the individual Minting or Redeeming of ".concat(n.TW," and ").concat(s.xTokenSymbol,"."):"More flexible operations can be conducted using the advanced panel in adjustment mode."})]}),children:s.isStable?(0,a.jsx)(StableVaultCard,{vc:s}):(0,a.jsx)(VaultCard,{vc:s})}),(0,a.jsx)(SimpleTabs,{data:[{tab:"Deposit",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(p.W,{asset:x,exchange:(0,T.dq)(c*b/g.Pq),balance:w,amount:m,setAmount:u}),(0,a.jsxs)("div",{className:"text-xs text-[#64748B] dark:text-slate-50/60 leading-[12px] flex items-center pl-[5px] mt-[6px]",children:["1 ",(0,a.jsx)(_.c,{className:"mx-1",symbol:x,size:12}),x," = ",(0,T.dq)(q)," ",(0,a.jsx)(_.c,{className:"mx-1",symbol:S,size:12})," ",x,"x +",(0,T.dq)(D)," ",(0,a.jsx)(_.c,{className:"mx-1",symbol:n.TW,size:12})," ",n.TW]}),(0,a.jsx)(v.v,{tx:"Deposit",className:s.isStable?"":"md:mt-11",disabled:s.disableIn||b<=0n||b>w,onTxSuccess:()=>{u("")},config:{abi:h.S4,address:s.vault,args:[b],value:s.assetTokenAddress==n.K8?b:0n,functionName:s.isStable&&0n==y.M_USDCx?"mintMarginTokens":"mintPairs"},approves:{[s.assetTokenAddress]:b},spender:s.vault})]})},{tab:"Withdraw",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(p.W,{amount:W,setAmount:M,balance:V,balanceTit:"Redeemable amount",asset:x,exchange:(0,T.dq)(c*E/g.Pq)})}),(0,a.jsxs)("div",{className:"text-xs text-[#64748B] dark:text-slate-50/60 leading-[12px] md:flex md:items-center md:justify-between pl-[5px] mt-[6px]",children:[(0,a.jsxs)("span",{className:"flex",children:[S," Balanceï¼š",(0,a.jsx)(_.c,{className:"mx-1",symbol:S,size:12})," ",(0,T.dq)(U)]}),(0,a.jsxs)("span",{className:(0,k.cn)("flex relative"),children:[n.TW," Balance: ",(0,a.jsx)(_.c,{className:"mx-1",symbol:n.TW,size:12})," ",(0,T.dq)(F)]})]}),!s.isStable&&(0,a.jsxs)("div",{className:"mt-2 text-center text-xs text-slate-500 dark:text-slate-50/70 relative md:text-right ",children:["Maintaining ",n.TW," balance greater than your Margin",(0,a.jsx)("br",{className:"hidden md:block"}),"Loan allows you to redeem your total Open Position"]}),(0,a.jsx)(v.v,{tx:"Withdraw",className:(0,k.cn)({"md:mt-1":!s.isStable}),config:Z,disabled:0n==D||0n==q||E<=0n||E>V,onTxSuccess:()=>{console.info("Redeem onSuccess:"),M("")},spender:s.vault})]})}]})]})})}function LVaultSimpleWrap(e){let{vc:s}=e,t=(0,i.p)(),{balances:l,prices:d,vaultsState:r,stableVaultsState:c}=(0,A.useContext)(N.g),o=(0,C.z)(s),{address:x}=(0,D.m)(),m=r[s.vault],u=c[s.vault],b=s.isStable?u.M_USDC:m.M_ETH,v=s.isStable?u.M_USDCx:m.M_ETHx,p=s.isStable?u.M_USB_USDC:m.M_USB_ETH,h=v>0n?l[s.xTokenAddress]*b/v:0n,g=v>0n?-(l[s.xTokenAddress]*p)/v:0n,{data:j}=(0,q.p)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(PointCards,{vc:s}),(0,a.jsxs)("div",{className:"w-full flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"min-h-[108px] flex flex-col justify-center shrink-0",children:[x&&!s.isStable&&(0,a.jsxs)("div",{className:"h-[84px] w-full p-[20px] shrink-0 text-[#64748B] dark:text-slate-50/60 text-xs font-medium leading-[12px] bg-white dark:bg-transparent dark:border dark:border-zinc-600 rounded-2xl mb-[10px] whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-[16px] gap-5",children:[(0,a.jsx)("div",{children:"Open Position"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.c,{className:"mr-1",symbol:s.assetTokenSymbol,size:12}),(0,T.dq)(h)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-[16px] gap-5",children:[(0,a.jsxs)("div",{children:["Margin Loan",(0,a.jsxs)(f.C,{children:["Repay your margin loan to redeem ",s.assetTokenSymbol," corresponding to your open position."]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.c,{className:"mr-1",symbol:n.TW,size:12}),(0,T.dq)(g)]})]})]}),(0,a.jsxs)("div",{className:"text-[#64748B] w-full flex-1 dark:text-slate-50/60 text-xs font-medium leading-[12px] bg-white dark:bg-transparent dark:border dark:border-zinc-600 px-[30px] py-[23px] rounded-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center mb-[16px] whitespace-nowrap",children:[G,o.toFixed(2),"x"," ",(0,R.RG)()&&s.isStable?"Blast Native Yield":"Leveraged long on ".concat(s.assetTokenSymbol)]}),(0,a.jsxs)("div",{className:"flex items-center mb-[16px] cursor-pointer whitespace-nowrap",onClick:()=>{s&&(null==j||j.watchAsset({type:"ERC20",options:{address:s.xTokenAddress,symbol:s.xTokenSymbol,decimals:18}}).catch(k.S3))},children:[G,"Add ",s.xTokenSymbol," to wallet"]}),(0,a.jsxs)("div",{className:"flex items-center mb-[16px] cursor-pointer whitespace-nowrap",onClick:()=>{null==j||j.watchAsset({type:"ERC20",options:{address:n.O1[t],symbol:n.TW,decimals:18}}).catch(k.S3)},children:[G,"Add ",n.TW," to wallet"]}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer whitespace-nowrap",onClick:()=>{var e,a;let l=R.Af.find(e=>e.id==t);l&&s&&open("".concat(null===(a=l.blockExplorers)||void 0===a?void 0:null===(e=a.default)||void 0===e?void 0:e.url,"/address/").concat(s.vault),"_blank")},children:[G,"View contract"]})]})]}),(0,a.jsx)("div",{className:"w-full  flex items-center justify-center",children:x&&s&&42==s.vault.length?(0,a.jsx)(VaultSimple,{vc:s}):s&&42==s.vault.length?(0,a.jsx)(F.Z,{}):(0,a.jsx)(P.Z,{className:"rounded",children:"Comming soon"})})]})]})}function VaultCollapse(e){let{vc:s}=e,t=(0,u.useRouter)();(0,i.p)();let{balances:l,prices:d,vaultsMode:r,vaultsState:c,stableVaultsState:o,vaultsDiscount:x}=(0,A.useContext)(N.g);(0,C.z)(s);let m=(0,k.ok)(d,s.assetTokenAddress),b=c[s.vault],v=o[s.vault],p=s.isStable?v.M_USDC:b.M_ETH,h=s.isStable?v.M_USDCx:b.M_ETHx,j=s.isStable?v.M_USB_USDC:b.M_USB_ETH,S=(0,T.dq)(p),w=(0,T.dq)(h);(0,T.dq)(p*m/g.Pq);let y=(0,T.dq)(j),W=s.isStable?(0,k.Rr)(v.aar,v.AARDecimals):(0,k.Rr)(b.aar,b.AARDecimals),M=r[s.vault];h>0n&&l[s.xTokenAddress],h>0n&&l[s.xTokenAddress],x[s.vault];let{address:R}=(0,D.m)(),[P,B]=(0,A.useState)(!1),F=s.xTokenSymbol,{data:U}=(0,q.p)();return(0,a.jsx)("div",{className:(0,k.cn)("card p-2",{"order-1":!s.assetTokenSymbol.includes("ETH")}),onClick:()=>t.push("/l-vaults?vault=".concat(s.vault)),children:(0,a.jsx)("div",{className:"w-full flex flex-col gap-5 md:flex-row justify-between items-center p-4 md:p-10 cursor-pointer",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5 gap-y-4 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between relative mb-8",children:[(0,a.jsx)("div",{className:" text-sm font-semibold whitespace-nowrap",children:s.assetTokenSymbol}),(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-medium",children:["$",(0,T.dq)(d[s.assetTokenAddress])]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between relative mb-8",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Total Deposit"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:S})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Status"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-[10px]",children:M<=1?Y:X}),M<=1?"Stability":"Adjustment"]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between",children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:[F,(0,a.jsx)(f.C,{children:"This is a margin token, representing open position in the vault."})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:w})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between",children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:["AAR",(0,a.jsx)(f.C,{children:"Asset Adequacy Ratio"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:W})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-between",children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:[n.TW," Debt"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.c,{className:"mx-1",symbol:n.TW,size:14}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:y})]})]})]})})})}var J=t(33071);let ValutArea=e=>{let{asset:s}=e,{vaultsState:t,stableVaultsState:l,vaultsDiscount:d}=(0,A.useContext)(N.g),r=(0,i.p)(),c=n.iK[r],o=c.find(e=>e.assetTokenSymbol==s),x=o.assetTokenSymbol,m=d[o.vault],u=m?"Discount available":"No discount",b=!m,v=t[o.vault],p=l[o.vault],{rate:f}=useDiscountRate(o),[h,g]=(0,A.useMemo)(()=>{if(o.isStable){if(!p)return["50%","50%"];let toPercent=e=>(100*Math.max(0,Math.min(1,(e-1)/1))).toFixed(2)+"%",e=(0,k.pF)(p.AARS,p.AARDecimals),s=(0,k.pF)(p.aar,p.AARDecimals);return[toPercent(s),toPercent(e)]}{if(!v)return["50%","50%"];let e=(0,k.pF)(v.AARU,v.AARDecimals),s=(0,k.pF)(v.aar,v.AARDecimals),t=(0,k.pF)(v.AARS,v.AARDecimals),a=(0,k.pF)(v.AART,v.AARDecimals),l=e/2,toPercent=s=>(100*Math.max(0,Math.min(1,(s-l)/(e-l)))).toFixed(2)+"%",n=toPercent(s);return b?[n,toPercent(t)]:[n,toPercent(a)]}},[o.isStable,v.AARU,v.aar,v.AARS,v.AART,p.AARS,p.aar,b]),j=o.isStable?(0,k.Rr)(p.aar,p.AARDecimals):(0,k.Rr)(v.aar,v.AARDecimals),T=o.isStable?(0,k.Rr)(p.AARS,p.AARDecimals):b?(0,k.Rr)(v.AARS,v.AARDecimals):(0,k.Rr)(v.AART,v.AARDecimals),S=(0,a.jsxs)("div",{style:{position:"relative",left:h,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-md",children:[(0,a.jsxs)("div",{className:"text-xs flex flex-col justify-center items-center p-1.5 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-400 whitespace-nowrap",children:"Current AAR"}),(0,a.jsx)("span",{className:"font-medium dark:text-violet-300",children:j})]}),(0,a.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",xmlns:"http://www.w3.org/2000/svg",className:"fill-slate-950 dark:fill-slate-50",fill:"currentColor",children:(0,a.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z"})})]}),w=(0,a.jsxs)("div",{style:{position:"relative",left:g,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-md",children:[(0,a.jsx)("svg",{className:"rotate-180",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:b?"#E83B3B":"#54E83B"})}),(0,a.jsxs)("div",{className:"text-xs flex flex-col justify-center items-center p-1.5 px-4",children:[(0,a.jsxs)("span",{className:"font-medium dark:text-violet-300",children:["AAR=",T]}),(0,a.jsx)("span",{className:"text-neutral-400 whitespace-nowrap",children:b?"Trigger discount":"Discount end"})]})]});return(0,a.jsxs)("div",{className:"bg-white border border-neutral-200 rounded-3xl flex flex-col items-center mb-4 md:flex-row p-4 w-full md:mb-[30px] dark:bg-transparent dark:border-zinc-600",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center h-fit gap-4",children:[(0,a.jsxs)("div",{className:"md:w-[180px] flex items-center",children:[(0,a.jsx)(_.c,{symbol:o.assetTokenSymbol,size:32,className:"mr-[10px] md:hidden"}),(0,a.jsx)(_.c,{symbol:o.assetTokenSymbol,size:54,className:"mr-[10px] hidden md:block"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-md md:text-xl font-bold",children:[x," Vault"]}),(0,a.jsx)("div",{className:"text-xs flex items-center gap-2",children:!m&&(0,a.jsxs)("div",{className:"flex items-center text-neutral-700 dark:text-slate-50 gap-1",children:[(0,a.jsx)("div",{className:(0,y.m)("w-3 h-3 shrink-0 rounded-full",m?"bg-red-500":"bg-green-500")}),u]})})]})]}),m&&(0,a.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("div",{className:(0,y.m)("w-3 h-3 shrink-0 rounded-full bg-red-500")})," Discount Rate: ",f]})]}),(0,a.jsxs)("div",{className:"w-full md:w-[calc(100%-170px)] p-4 rounded-lg flex flex-col gap-2",children:[S,(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"rounded-full shrink-0 w-[3px] h-[3px] bg-[#64748B] dark:bg-violet-300"}),(0,a.jsx)("div",{className:"h-px flex-1 bg-[#64748B] dark:bg-violet-300 after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-[#64748B] dark:after:text-slate-50"}),(0,a.jsx)("div",{className:"rounded-full shrink-0 w-[3px] h-[3px] bg-[#64748B] dark:bg-violet-300"})]}),w]})]})};function useDiscountRate(e){let{prices:s}=(0,A.useContext)(N.g),t=(0,i.p)(),{data:a}=(0,j.D2)({abi:h.Wn,address:n.O6[t],functionName:e.isStable?"calcUsbToMarginTokensForStableVault":"calcUsbToMarginTokens",args:[e.vault,n.e_[t],(0,k.su)("1")]}),l=(0,k.ok)(a,[1]),d=(0,A.useMemo)(()=>0n==l?0n:(0,k.su)("1")*g.Pq/l,[l]),r=(0,A.useMemo)(()=>{let t=s[e.xTokenAddress];return!t||0n==t||0n==d||d>=t?"0.00%":(0,k.Jh)((t-d)*g.Pq/t,18,2)},[s[e.xTokenAddress],d]);return{rate:r,oneUsbXoutValue:l}}function LVaultsDiscount(e){let{vc:s}=e,{balances:t,prices:l,vaultsDiscount:d}=(0,A.useContext)(N.g),r=(0,i.p)(),c=(0,A.useMemo)(()=>n.iK[r].filter(e=>!e.disableIn),[r]),o=(0,A.useMemo)(()=>c.map(e=>({value:e.vault,label:e.xTokenSymbol})),[c]),[x,m]=(0,A.useState)(o[0]),u=o.find(e=>e===x)?x:o[0],b=d[s.vault],f=(0,k.ok)(l,s.xTokenAddress),j=t[n.O1[r]],[w,y]=(0,A.useState)(""),W=(0,k.su)(w),M=0n!=W&&W<=j&&b,{rate:R,oneUsbXoutValue:C}=useDiscountRate(s),P=C*W/g.Pq;return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"bg-indigo-50 dark:bg-s1 p-6 mt-[30px] rounded-3xl relative",children:(0,a.jsxs)("p",{className:"text-indigo-900 dark:text-slate-50/80 mt-4",children:["Due to fluctuations in the prices of collateral, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with $",n.TW,". This means that you can engage in arbitrage."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 mt-5 gap-2 md:grid-cols-2 md:gap-4 md:gap-8 md:mt-8",children:[(0,a.jsx)("div",{className:"w-full",children:c.map(e=>(0,a.jsx)(ValutArea,{asset:e.assetTokenSymbol},"vault_area_".concat(e.assetTokenSymbol)))}),(0,a.jsxs)("div",{className:"w-full bg-white border border-neutral-200 p-4 mb-4 md:p-[30px] md:pt-[60px] rounded-3xl md:mb-[30px] dark:bg-transparent dark:border-zinc-600",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 w-full mx-auto",children:[(0,a.jsx)(p.W,{asset:n.TW,amount:w,setAmount:y,balance:j,exchange:(0,T.dq)(W*(0,k.ok)(l,n.O1[r],g.Pq)/g.Pq)}),(0,a.jsxs)("div",{className:"flex items-center justify-center w-full",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(S.gPZ,{className:"w-6 h-6 text-neutral-500  border border-neutral-200 rounded-full my-[10px]"}),(0,a.jsx)("div",{className:"flex-1"})]}),(0,a.jsxs)("div",{className:"w-full flex-1 text-right text-neutral-700 dark:text-slate-50/60 text-md whitespace-nowrap",children:["Discount Rate: ",b?R:"--"]}),(0,a.jsx)(p.W,{asset:u.label,amount:(0,T.dq)(P),exchange:(0,T.dq)(f*P/g.Pq),readonly:!0,hasInput:!0,options:o,defaultValue:o[0],onChange:e=>{console.log(e),m(e)}})]}),(0,a.jsx)(v.v,{tx:"Swap",disabled:!M,onTxSuccess:()=>{y("")},config:{abi:h.WW,address:s.vault,functionName:"usbToMarginTokens",args:[W],enabled:M},approves:{[n.O1[r]]:W},spender:s.vault})]})]})]})}let Q=["deposit","yield","discount"];function Vaults(){let e=(0,i.p)(),s=n.iK[e],t=(0,u.useSearchParams)(),v=t.get("vault"),p=t.get("tab"),f=Q.includes(p)?p:"deposit",h=s.find(e=>e.vault==v);return(0,a.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto md:pb-8",children:[(0,a.jsx)(l.a,{}),h?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)(o.Z,{variant:"line",defaultValue:f,children:[(0,a.jsx)(r.Z,{value:"deposit",children:"Deposit"}),(0,a.jsx)(r.Z,{value:"yield",children:"Price Trigger Yield"}),(0,a.jsx)(r.Z,{value:"discount",children:"Discount Offer"})]}),(0,a.jsxs)(m.Z,{className:"mt-8",children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(LVaultSimpleWrap,{vc:h})}),(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsx)(J.Q,{vc:h,type:"buy"}),(0,a.jsx)(J.Q,{vc:h,type:"sell"})]})}),(0,a.jsx)(x.Z,{children:(0,a.jsx)(LVaultsDiscount,{vc:h})})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"page-title",children:"L-Vaults"}),(0,a.jsxs)("div",{className:"w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(b.pMA,{size:20})}),(0,a.jsx)("div",{className:"text-sm ml-1 ",children:"Depositing assets into the Vaults"})]}),(0,a.jsx)(d.Z,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-3 mt-4",children:s.map((e,s)=>(0,a.jsx)(VaultCollapse,{vc:e},"group_vault_item_".concat(s)))})]})]})}},78203:function(e,s,t){"use strict";t.d(s,{m:function(){return useTokenApys}});var a=t(81628),l=t(23862),n=t(86825),i=t(66949),d=t(2265),r=t(36479),c=t(14389),o=t(72009),x=t(43977);function useTokenApys(){let e=(0,l.b)(()=>(0,a.Yb)({},0n)),s=(0,c.p)(),{prices:t,usbApr:m,stableVaultsState:u}=(0,d.useContext)(r.g),b=(0,i.a)(),v=(0,n.i)();return(0,d.useMemo)(()=>{let t=o.iK[s],l=(0,a.ok)(v[t[0].ptyPoolBelowAddress],"staking");e[o.O1[s]]=m.apr,e.USB_END=m.apr+l;let n=(0,x.v)("0.1",10);return t.forEach(s=>{if(s.assetTokenAddress!=o.K8){let t=b[s.vault]>1n?(0,x.v)("".concat((b[s.vault]-1).toFixed(2)),10):0n,a=(0,x.v)("1",10);e[s.xTokenAddress]=(t*(n-u[s.vault].Y*u[s.vault].aar/a)+n*a)/a}}),null},[s,t,b,m,v,u]),e}},66949:function(e,s,t){"use strict";t.d(s,{a:function(){return useValutsLeverageRatio},z:function(){return useVaultLeverageRatio}});var a=t(72009),l=t(81628),n=t(36479),i=t(2265),d=t(14389),r=t(23862);function useVaultLeverageRatio(e){let{vaultsState:s,stableVaultsState:t}=(0,i.useContext)(n.g),a=s[(null==e?void 0:e.vault)||"null"],d=t[(null==e?void 0:e.vault)||"null"],r=(null==e?void 0:e.isStable)?(0,l.pF)(d.aar,d.AARDecimals):(0,l.pF)(a.aar,a.AARDecimals);return Math.max(0,1+1/(r-1))}function useValutsLeverageRatio(){let{vaultsState:e,stableVaultsState:s}=(0,i.useContext)(n.g),t=(0,d.p)(),c=a.iK[t],o=(0,r.b)(()=>new Proxy({},{get:function(e,s){return s in e&&null!==e[s]&&void 0!==e[s]?e[s]:0}}));return c.forEach(t=>{let a=e[(null==t?void 0:t.vault)||"null"],n=s[(null==t?void 0:t.vault)||"null"],i=(null==t?void 0:t.isStable)?(0,l.pF)(n.aar,n.AARDecimals):(0,l.pF)(a.aar,a.AARDecimals);o[t.vault]=Math.max(0,1+1/(i-1))}),o}}},function(e){e.O(0,[1866,1582,2400,9472,6169,1787,3712,3033,6682,5537,3012,523,911,9622,6714,5668,5224,6429,5077,1777,619,3071,2971,2472,1744],function(){return e(e.s=38179)}),_N_E=e.O()}]);